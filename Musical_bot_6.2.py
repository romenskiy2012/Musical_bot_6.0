#pip3 install discord.py
#pip3 install youtube-dl
#pip3 install PyNaCl
#sudo apt install ffmpeg
# on
#sudo pacman -S ffmpeg
#pip3 install PyYAML

DEBUG = True

# BEGIN –†–∏—Å—É–µ–º –∑–∞–∫–≥—É–∑–∫—É –≤ –∫–∞–Ω—Å–æ–ª—å.


ESC = b'\x1B' # –ù–∞—á–∏–Ω–∞–µ—Ç ESC-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
LF = b'\x0A' # \n –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É
CR = b'\x0D' # \r –ü–µ—Ä–µ–≤–æ–¥ –≤ –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏
CSI = b'[' # –í–≤–æ–¥ —É–ø—Ä–∞–≤–ª—è—é—â–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
EL = b'K' # –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫—É. 2 - –≤—Å—é —Å—Ç—Ä–æ–∫—É

import sys
import shutil




screen_size = shutil.get_terminal_size()
sys.stdout.buffer.write(LF*screen_size.lines)
# –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å —ç–∫—Ä–∞–Ω –≤ –∫–æ–Ω–µ—Ü


i = 0 # —Å—á—ë—Ç—á–∏–∫

def nprint(text):
    global i
    sys.stdout.buffer.write(ESC+CSI+b'2'+EL+CR)
    # —Å—Ç–∏—Ä–∞–µ—Ç —Å—Ç—Ä–æ—á–∫—É –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –Ω–∞—á–∞–ª–æ
    print(text)
    # –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —Å—Ç—Ä–æ—á–∫–µ –ø–∏—à–µ–º —Ç–µ–∫—Å—Ç –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –Ω–æ–≤—É—é
    print('progress: '+ '|'*i + '='*(10-i) , i*10, '%', end='')
    # –∞ –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
    # end='' - –∑–Ω–∞—á–∏—Ç –æ—Å—Ç–∞–µ–º—Å—è –≤ —Å—Ç—Ä–æ–∫–µ
    sys.stdout.flush()
    # –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –Ω–µ–¥–æ–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    i+=1

def nprint2(text, i):
    j = int(i)
    i = int(i) / 10
    i = int(i)
    sys.stdout.buffer.write(ESC+CSI+b'2'+EL+CR)
    print(text)
    print('progress: '+ '|'*i + '='*(10-i) , j, '%', end='')
    sys.stdout.flush()


# END

########################### –î–∏—Å–∫–æ—Ä–¥
import discord
import asyncio
from discord.ext import commands, tasks
from discord.utils import get
############################

nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∏—Å–∫–æ—Ä–¥ API")


############################

############################ –ú–æ–¥—É–ª–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
#import youtube_dl

############################

############################ –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–æ–¥—É–ª–∏
import os
from threading import Thread
from subprocess import call
from time import strftime, localtime, sleep, time, gmtime#–î–ª—è (Time)

#import time
import random
############################

nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–æ–¥—É–ª–µ–π")


put = os.path.dirname(os.path.realpath(__file__)) + "/"#–ü—É—Ç—å- (part-1)

############################ json –º–æ–¥—É–ª—å
import json
with open(f"{put}sonf.json", "r") as read_file:
    X_Pars = json.load(read_file)
############################
nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è json –º–æ–¥—É–ª—å")

#################################### –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

#import add

#import handler
import youtube
nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è youtube")
import bd_module
nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è bd_module")
import question
nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è question")
import download
nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è download")
import water_handler
nprint("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è water_handler")
import time_translation

import time_mark
import bot_gui
####################################


# BEGIN sql –º–æ–¥—É–ª—å
############################ sql –º–æ–¥—É–ª—å
SQL_Q = [[], [], [], [], [], [], []]


SQL_Q = bd_module.db_add(SQL_Q)

#print(SQL_Q[5][0])
'''
print("########################")
for id_user in SQL_Q[0]:
    print(id_user)
print("########################")
'''
############################
# END
nprint("–°–æ–∑–¥–∞–Ω–∏—è –∫–æ–ø–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤")



### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

a = True
list = os.listdir()
for list_2 in list:
    if list_2 == "Music":
        #print("–¢–∞–∫–æ–π —Ñ–∞–µ–ª –µ—Å—Ç—å!")
        a = False
if a == True:
    os.mkdir("Music")
    nprint("–í—Å–µ –ø–∞–ø–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ!")
else:
    nprint("–°–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–æ–∫!")



#os.rmdir("Music")
#os.mkdir("Music")
#call(["rm", "-r", "Music"])
#call(["mkdir", "Music"])


#print(X_Pars)
TOKEN = X_Pars['token']
bot = commands.Bot(command_prefix=X_Pars['prefix'])
client = discord.Client()
bot.remove_command("help")


###

Turn = [] # –û—á–µ—Ä–µ–¥–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
#Turn2 = [] # –û—á–µ—Ä–µ–¥–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

sor = ()
video = ()
Question = [["001"], [], [], []] # –ó–∞–ø—Ä–æ—Å—ã.
#Question = [[233962119106789376,"001"], [769927691545215006], [785670323655016459], [False]] # –ó–∞–ø—Ä–æ—Å—ã.

volume1 = 0.2 # –ì—Ä–æ–º–∫–æ—Å—Ç—å!



# BEGIN –†–µ–¥–æ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—à–µ–Ω–∏—è.

################################################################################# –†–µ–¥–æ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—à–µ–Ω–∏—è.

async def sing_ddd(message, voice): # –†–µ–¥–æ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—à–µ–Ω–∏—è.
    msg = bot.get_guild(message.guild.id)
    await voice.disconnect()
    r2 = X_Pars['preview']
    #r2 = "https://cdn.discordapp.com/attachments/587366302780358688/806924319422152744/BOT_V6.0.webp"

    a = 0
    for id_lin in SQL_Q[3]: # –£–∑–Ω–æ—ë–º –Ω–æ–º–µ—Ä —Å–æ–æ–±—à–µ–Ω–∏–π.
        if id_lin == message.channel.id:
            print(SQL_Q[5][a])
            qm2 = int(SQL_Q[5][a])
            qm = int(SQL_Q[4][a])
            channel_id = message.channel.id
        a = a + 1



    id_jgkihjkf = int(message.author.guild.id)
    msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm)
    bot.loop.create_task(msg_sa.edit(content=(r2)))




def checking_the_queue(message,voice, index): # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª–µ–¥—É–π—à–∏–π —Ç—Ä–µ–∫.
    bd_module.delete_the_timeline(index)
    id , time_L = bd_module.reading_from_a_queue(message)
    if id == "stop":
        bd_module.deleting_a_queue(message) # –£–¥–æ–ª–µ–Ω–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Ç—Ä–µ–∫–∞
        bot.loop.create_task(sing_ddd(message, voice))
    else:
        if id == "rewind":
            start_position = time_L
        else:
            start_position = 0
        bd_module.deleting_a_queue(message) # –£–¥–æ–ª–µ–Ω–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Ç—Ä–µ–∫–∞
        id , put_it_on = bd_module.reading_from_a_queue(message)
        if id == "001":
            id, name = bd_module.search_random_ID()
            bd_module.adding_to_the_queue(message, id, name, "system")
            sing(message,id, put_it_on, start_position)


            #bot.loop.create_task(sing_ddd(message))
            #bot.loop.create_task(voice.disconnect())
            #pass
        else:
            #bot.loop.create_task(sing(message,sasss))
            sing(message,id, put_it_on, start_position)

async def sing_k8ifg4(id, name_2, volume, time, views, estimation, date, message, uploaded, upload_date, put_it_on, thumbnail, start_position): # –†–µ–¥–æ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—à–µ–Ω–∏—è.



    r1 = thumbnail
    if thumbnail == "" or thumbnail == None:
        r1 = (f"https://i.ytimg.com/vi/{id}/hqdefault.jpg")



    a = 0
    for id_lin in SQL_Q[3]: # –£–∑–Ω–æ—ë–º –Ω–æ–º–µ—Ä —Å–æ–æ–±—à–µ–Ω–∏–π.
        if id_lin == message.channel.id:
            print(SQL_Q[5][a])
            qm3 = int(SQL_Q[6][a])
            qm2 = int(SQL_Q[5][a])
            qm = int(SQL_Q[4][a])
            channel_id = message.channel.id
        a = a + 1




    id_jgkihjkf = int(message.author.guild.id)
    msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm)
    bot.loop.create_task(msg_sa.edit(content=(r1)))

    msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm2)
    if uploaded != "N/D":
        uploaded = f"<@{uploaded}>"
    if put_it_on == "001" or put_it_on == "" or uploaded == None:
        put_it_on = "üá∏ üáæ üá∏ üáπ üá™ üá≤"
    else:
        put_it_on = f"<@{put_it_on}>"

    lll = f"{name_2}\nüëÄ {views} üëç {estimation} üóìÔ∏è {date} \nüíæ {uploaded} \nüíæüóìÔ∏è {upload_date} \n‚úÖ {put_it_on} \n–¢—Ä–µ–∫ –≥–æ—Ç–æ–≤ –∑–∞ {preparation_time3} –°–µ–∫ !\n{start_position} - {time}"





    bot.loop.create_task(msg_sa.edit(content=(lll)))

    """
    a = 0
    for id_lin in SQL_Q[3]: # –£–∑–Ω–æ—ë–º –Ω–æ–º–µ—Ä —Å–æ–æ–±—à–µ–Ω–∏–π.
        if id_lin == message.channel.id:
            qm3 = int(SQL_Q[6][a])
            channel_id = message.channel.id
        a = a + 1
    """
    queue = bd_module.reading_from_all_queue(message) # –û—á–µ—Ä–µ–¥—å
    msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm3)
    bot.loop.create_task(msg_sa.edit(content=(queue)))


#################################################################################
# END


# BEGIN –ü–ï–¢–¨!
def convert_to_preferred_format(sec):
    sec = sec % (24 * 3600)
    hour = sec // 3600
    sec %= 3600
    min = sec // 60
    sec %= 60
    if hour == 0:
        return (f"{min}:{sec}")
    else:
        return (f"{hour}:{min}:{sec}")

theme = 2



async def timeline(message, time_SSS, lll, index, start_position, description):
    description_list = ""
    if description != None or description != "":
        hub_time, hub_name = time_mark.init_read(description)
    if len(hub_name) == len(hub_time):
        a = 0
        for hub_time_l in hub_time:
            description_list = description_list + f"{hub_time_l} - {hub_name[a]}\n"
            a = a + 1
    else:
        print(f"!!!–ö–û–ù–§–õ–ò–ö–¢!!!\n{len(hub_name)} != {len(hub_time)}")
    def description_list_target_ALL(hub_time, hub_name, target_id):
        description_list_target = ""
        if len(hub_name) == len(hub_time):
            a = 0
            for hub_time_l in hub_time:
                ty_res = gmtime(hub_time_l)
                res = strftime("%H:%M:%S",ty_res)
                #print(res)
                if a == target_id:
                    description_list_target = description_list_target + f"‚û°Ô∏è `{res}` - {hub_name[a]} ‚¨ÖÔ∏è\n"
                else:
                    description_list_target = description_list_target + f"üîò `{res}` - {hub_name[a]}\n"
                a = a + 1
        else:
            print(f"!!!–ö–û–ù–§–õ–ò–ö–¢!!!\n{len(hub_name)} != {len(hub_time)}")
        #print(description_list_target)
        return description_list_target
    def ALA(start_position, hub_time, hub_name):
        M = 0
        for L in hub_time:
            if L >= start_position:
                if len(hub_name) >= M:
                    return hub_name[M - 1], M - 1
            M = M + 1
        return None
    slips_l = 10
    L_1 = "```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n"
    L_3 = "\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```"
    id_jgkihjkf = int(message.author.guild.id)
    a = 0
    for id_lin in SQL_Q[3]: # –£–∑–Ω–æ—ë–º –Ω–æ–º–µ—Ä —Å–æ–æ–±—à–µ–Ω–∏–π.
        if id_lin == message.channel.id:
            qm2 = int(SQL_Q[5][a])
            channel_id = message.channel.id
        a = a + 1
    print("–ñ–∏–≤ ?")
    await asyncio.sleep(5)
    start_position = int(start_position) + 5
    print("–ñ–∏–≤ ?2")
    msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm2)
    while bd_module.checking_the_timeline(index):
        time_p = time_SSS/100
        time_pS = int(start_position/time_p)
        i = int(int(time_pS)*0.3)
        L_2 = f"‚ïë {'‚ñà' * i}{' ' * (30 - i)} ‚ïë "
        time_SSS_Q = convert_to_preferred_format(time_SSS)
        start_position_Q = convert_to_preferred_format(start_position)
        name, target_id = ALA(start_position, hub_time, hub_name)
        if theme == 0:
            bot.loop.create_task(msg_sa.edit(content=(f"{lll}{L_1+L_2+L_3}{start_position_Q} - {time_SSS_Q} {time_pS}%\n‚û°Ô∏è {name} ‚¨ÖÔ∏è")))
        elif theme == 1:
            bot.loop.create_task(msg_sa.edit(content=(f"{lll}{L_1+L_2+L_3}{start_position_Q} - {time_SSS_Q} {time_pS}%\n{description_list}")))
        elif theme == 2:
            description_list_target = description_list_target_ALL(hub_time, hub_name, target_id)
            bot.loop.create_task(msg_sa.edit(content=(f"{lll}{L_1+L_2+L_3}{start_position_Q} - {time_SSS_Q} {time_pS}%\n{description_list_target}")))
        await asyncio.sleep(slips_l)
        start_position = int(start_position) + slips_l
"""
async def timeline(message, time_SSS, voice, lll, index):
    sor = ""
    GAMENAME = ""
    lll_2 = [
    f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë                                ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà                            ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                         ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                      ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                   ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà             ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà          ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n", f"```\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ïë {sor}-{GAMENAME}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù```\n"]


    print(voice.timestamp)
    id_jgkihjkf = int(message.author.guild.id)
    a = 0
    for id_lin in SQL_Q[3]: # –£–∑–Ω–æ—ë–º –Ω–æ–º–µ—Ä —Å–æ–æ–±—à–µ–Ω–∏–π.
        if id_lin == message.channel.id:
            qm2 = int(SQL_Q[5][a])
            channel_id = message.channel.id
        a = a + 1
    print("–ñ–∏–≤ ?")
    await asyncio.sleep(5)
    print("–ñ–∏–≤ ?2")
    msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm2)
"""
"""
    print("–ñ–∏–≤ ?3")
    while True:
        print("–ñ–∏–≤ ?4")
        await asyncio.sleep(10)
        print("–ñ–∏–≤ ?5")
        print(voice.timestamp/100000)
        print("–ñ–∏–≤ ?6")
        bot.loop.create_task(msg_sa.edit(content=(f"{lll}\n{int(voice.timestamp/100000)} - {time}")))
        print("–ñ–∏–≤ ?7")

"""
"""
    while bd_module.checking_the_timeline(index):
        bot.loop.create_task(msg_sa.edit(content=(f"{lll}\n{int(voice.timestamp/500000)} - {time} {int(voice.timestamp/500000*(time/100))}%")))
        await asyncio.sleep(10)
"""
#async def sing(message,sasss):

def sing(message,id, put_it_on, start_position):  ################## –ü–ï–¢–¨!
    print(id)

    name_2, volume, time, views, estimation, date, uploaded, upload_date, thumbnail, description = bd_module.search_ID(id)

    bot.loop.create_task(sing_k8ifg4(id, name_2, volume, time, views, estimation, date, message, uploaded, upload_date, put_it_on, thumbnail, start_position))
    #sing_k8ifg4(id, name_2, volume, time, views, estimation, date, message)

    sasss = f"{put}Music/{id}.opus"

    msg = bot.get_guild(message.author.guild.id)
    voice = get(bot.voice_clients, guild=msg)

    #voice.play(discord.FFmpegPCMAudio(sasss), after = lambda x: checking_the_queue(message,voice))

    #start_position = 30000 # - –ø—É—Å—Ç—å –Ω–∞–¥–æ –Ω–∞—á–∞—Ç—å —Å 5 —Å–µ–∫ (5000 –º—Å–µ–∫)
    #FFmpegPCMAudio(b.read(), pipe=True, options=f"-ss {start_point / 1000}") # - –¥–ª—è BytesIO

    if uploaded != "N/D":
        uploaded = f"<@{uploaded}>"
    if put_it_on == "001" or put_it_on == "" or uploaded == None:
        put_it_on = "üá∏ üáæ üá∏ üáπ üá™ üá≤"
    else:
        put_it_on = f"<@{put_it_on}>"

    lll = f"{name_2}\nüëÄ {views} üëç {estimation} üóìÔ∏è {date} \nüíæ {uploaded} \nüíæüóìÔ∏è {upload_date} \n‚úÖ {put_it_on} \n–¢—Ä–µ–∫ –≥–æ—Ç–æ–≤ –∑–∞ {preparation_time3} –°–µ–∫ !"


    index = str(random.randint(0, 100000)) + str(random.randint(0, 100000))
    bd_module.creature_the_timeline(index)


    #task = asyncio.create_task(timeline(message, time, voice, lll))
    #voice.play(discord.FFmpegPCMAudio(sasss, options=f"-ss {start_position}"), after = lambda x: checking_the_queue(message,voice,task))
    sas = voice.play(discord.FFmpegPCMAudio(sasss, options=f"-ss {start_position}"), after = lambda x: checking_the_queue(message, voice, index))
    #print(after)
    print(sas)
    print(sas)
    print(sas)
    print(sas)
    print(sas)
    print(sas)

    voice.source = discord.PCMVolumeTransformer(voice.source)
    voice.source.volume = volume1
    
    #bot.loop.create_task(timeline(message, time, lll, index, start_position, description)) #
    bot.loop.create_task(bot_gui.timeline(bot, SQL_Q, message, time, lll, index, start_position, description))




    #client.voice_clients[0].play(discord.FFmpegPCMAudio('./source.mp3')) # - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª


    #start_position = 5000 # - –ø—É—Å—Ç—å –Ω–∞–¥–æ –Ω–∞—á–∞—Ç—å —Å 5 —Å–µ–∫ (5000 –º—Å–µ–∫)
#FFmpegPCMAudio(b.read(), pipe=True, options=f"-ss {start_point / 1000}") # - –¥–ª—è BytesIO

#FFmpegPCMAudio('my_song.mp3', options=f"-ss {start_point / 1000}")




#################################################################################

# END


async def qwestion(url, message):
    channel = message.channel
    await channel.send("–ü–ª–µ–π–ª–∏—Å—Ç ?\ny/n")
    sleep(1)
    txt_id = (channel.last_message_id)
    bd_module.qwestion_bd(message, txt_id, url)

async def SSSS(message,url, id, put_it_on):
    #bot.loop.create_task(messenger_2(message,url, id, put_it_on))
    messenger_2(message,url, id, put_it_on).start()



# BEGIN –ü—Ä–æ–≤–µ—Ä–∫–∞–∫ —á—Ç–æ —ç—Ç–æ. –∏ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –¥–æ–±–æ–≤–ª–µ–Ω–∏—è.

async def messenger(message,url): # ‚Ññ1  –ü—Ä–æ–≤–µ—Ä–∫–∞–∫ —á—Ç–æ —ç—Ç–æ.
    if DEBUG: print("222")
    if youtube.start(url):
        if DEBUG: print("222")
        if DEBUG: print("–≠—Ç–æ —é—Ç—É–±!")
        if youtube.start_list(url):# –û—á–µ—Ä–∏–¥—å –ª–∏ ?
            if DEBUG: print("–ó–∞–≥–ª—É—à–∫–∞")
            #qwestion(url, Turn, id, id_channel, message)
            id = water_handler.youtube(url) ### –í–ù–ò–ú–ê–ù–ò–ï!!! –ó–ê–ì–õ–£–®–ö–ê!!!
            url = f"https://www.youtube.com/watch?v={id}" ### –í–ù–ò–ú–ê–ù–ò–ï!!! –ó–ê–ì–õ–£–®–ö–ê!!!
            #bot.loop.create_task(qwestion(url, message)) # TODO –û—á–µ—Ä–µ–¥—å –Ω–µ –¥–æ–¥–µ–ª–æ–Ω–∞, –¥–æ–Ω–∞–∫–æ —ç—Ç–æ—Ç –∫—É—Å–æ–µ –µ—ë –≤–∫–ª—é—á–∏—Ç, (–ü–µ—Ä–µ–¥ —ç—Ç–∏–º –∑–∞–∫–æ–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥–ª—É—à–∫–∏ —Ä—è–¥–æ–º.)
            print("SAS111")
            #asyncio.run(qwestion(url, message))
            print("SAS222")
            await messenger(message,url) ### –í–ù–ò–ú–ê–ù–ò–ï!!! –ó–ê–ì–õ–£–®–ö–ê!!!

            pass
        else:
            if DEBUG: print("2")
            id, name = await download.youtube_d(url,message)
            if id == False:
                channel = message.channel
                await channel.send("–°—Ç—Ä–∏–º, –Ω–µ–ª—å–∑—è!")
                sleep(2)
                txt_id = (channel.last_message_id)
                sleep(3)
                msg = await message.channel.fetch_message(txt_id)
                await msg.delete()

            #youtube.don(url)# –°–∫–∞—á–∞—Ç—å
            if DEBUG: print("–ì–æ—Ç–æ–≤–æ")
            preparation_time2 = time()
            global preparation_time3
            preparation_time3 = (preparation_time2 - preparation_time)
            preparation_time3 = round(preparation_time3, 2)
            if DEBUG: print(preparation_time3)
            if DEBUG: print("3")
            put_it_on = message.author.id
            await messenger_2(message,url, id, put_it_on, name)

            # BEGIN –ö–∞–∫–æ–π—Ç–æ –∫—Ä–∏–Ω–∂

            #bot.loop.create_task(messenger_2(message,url, id, put_it_on, name))
            #bot.loop.create_future(messenger_2(message,url, id, put_it_on))

            print("SAS")

            #asyncio.run(messenger_2(message,url, id, put_it_on))



            #tasks = [bot.loop.create_task(messenger_2(message,url, id, put_it_on))]
            #wait_tasks = asyncio.wait(tasks)
            #ioloop.run_until_complete(wait_tasks)
            #ioloop.close()

            #asyncio.run(messenger_2(message,url, id, put_it_on))
            #asyncio.run(messenger_2(message,url, id, put_it_on))
            #asyncio.run(SSSS(message,url, id, put_it_on))
            print("SAS121")

            #messenger_2(message,url, id)
            #task1 = asyncio.create_task(messenger_2(message,url, id))
            # END
    else:
        if DEBUG: print("–≠—Ç–æ –Ω–µ —é—Ç—É–±!")

# END

async def messenger_2(message,url, id, put_it_on, name): # ‚Ññ2     –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –¥–æ–±–æ–≤–ª–µ–Ω–∏—è.
    if DEBUG: print("4")
    msg = bot.get_guild(message.author.guild.id)
    channel = message.author.voice.channel
    voice = get(bot.voice_clients, guild=msg)
    if DEBUG: print("5")
    if voice and voice.is_connected():
        # –¥–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É
        if DEBUG: print("–¥–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É")
        bd_module.adding_to_the_queue(message, id, name, message.author.id)

        # BEGIN –ö—Ä–∏–Ω–∂ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–∏.
        id_jgkihjkf = int(message.author.guild.id)
        a = 0
        for id_lin in SQL_Q[3]: # –£–∑–Ω–æ—ë–º –Ω–æ–º–µ—Ä —Å–æ–æ–±—à–µ–Ω–∏–π.
            if id_lin == message.channel.id:
                qm3 = int(SQL_Q[6][a])
                channel_id = message.channel.id
            a = a + 1

        queue = bd_module.reading_from_all_queue(message) # –û—á–µ—Ä–µ–¥—å
        msg_sa = await bot.get_guild(id_jgkihjkf).get_channel(channel_id).fetch_message(qm3)
        bot.loop.create_task(msg_sa.edit(content=(queue)))
        if DEBUG: print(queue)
        # END



        await voice.move_to(channel)
    else:
        if DEBUG: print("6")
        bd_module.adding_to_the_top_of_the_queue(message, id, name, message.author.id)
        voice = await channel.connect()
        if DEBUG: print(f"–ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ {channel}\n")
        #bot.loop.create_task(sing(message,sasss))
        start_position = 0
        sing(message,id, put_it_on, start_position)




### –í—ã–¥–µ–ª—è–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤.
### –ï—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∞—Å–∏–Ω–æ—Ö–æ–Ω–Ω—É—é –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å.
### !–°–æ–æ–±—à–∏—Ç–µ!
#################################################################################





################################################

async def http(url, Turn, id, id_channel, message):


    global Question
    url_index = []
    if DEBUG: print (url)

    url_index.extend(url)
    url_index.append ("001")
    x = 0
    if url_index[x] == "h":
        if url_index[x + 1] == "t":
            if url_index[x + 2] == "t":
                if url_index[x + 3] == "p":
                    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤–æ–ø—Ä–æ—Å–∞
                    user_id = message.author.id
                    id_question = question.start(Question, user_id, id)
                    if id_question != False:
                        # –£–¥–æ–ª–∏—Ç—å id_question
                        #

                        #  –£–¥–æ–ª–∏—Ç—å —Å–æ–æ–±—à–µ–Ω–∏–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º.
                        pass
                    if DEBUG: print(Question)

                    # –ß—Ç–æ –∑–∞ —Å–µ—Ä–≤–∏—Å ?
                    #variable2 = Thread(target=messenger, args=(message,url))
                    #variable2.start()
                    if DEBUG: print("1")
                    #messenger(message,url)
                    #bot.loop.create_task(messenger(message,url))
                    #task2 = asyncio.create_task(messenger(message,url))

                    #variable2 = Thread(target=messenger, args=(message,url))
                    #variable2.start()

                    #await messenger(message,url)
                    #asyncio.create_task(messenger(message,url))
                    await messenger(message,url)

                    if DEBUG: print("SSS")





###############################################



preparation_time = ()
preparation_time3 = ()

# BEGIN –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

################################################
def command(message): # –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.


    if message.content == "!add":
        bot.loop.create_task(add(message))
    if message.content == "!test":
        bot.loop.create_task(test(message))

async def test(message): # /test
    channel = message.channel
    await channel.send("–¢—É—Ç!")

async def add(message): # /add
    await message.delete()
    print(message.author.guild.name)# –ò–º—è
    print(message.author.guild.id)# –ê–π–¥–∏
    print(message.channel.name)# –ò–º—è
    print(message.channel.id)# –ê–π–¥–∏
    msg = bot.get_guild(message.author.guild.id).get_channel(message.channel.id)
    channel = message.channel
    await channel.send("–ü—Ä–∏–≤–µ—Ç")
    sleep(1)
    txt_1 = (channel.last_message_id)
    msg = await bot.get_guild(message.author.guild.id).get_channel(message.channel.id).fetch_message(txt_1)
    emoji = "‚è∏Ô∏è"
    await msg.add_reaction(emoji)
    emoji = "‚ñ∂Ô∏è"
    await msg.add_reaction(emoji)
    emoji = "‚è©"
    await msg.add_reaction(emoji)
    emoji = "‚è≠Ô∏è"
    await msg.add_reaction(emoji)
    emoji = "‚èπÔ∏è"
    await msg.add_reaction(emoji)
    emoji = "üîÑ"#–ü–æ–≤—Ç–æ—Ä
    await msg.add_reaction(emoji)
    emoji = "üîä"
    await msg.add_reaction(emoji)
    emoji = "üîâ"
    await msg.add_reaction(emoji)
    print(channel.last_message_id)




    await channel.send("–ü—Ä–∏–≤–µ—Ç2")
    sleep(1)
    txt_2 = (channel.last_message_id)
    print(channel.last_message_id)
    await channel.send("–ü—Ä–∏–≤–µ—Ç3")
    sleep(1)
    txt_3 = (channel.last_message_id)
    print(channel.last_message_id)

    bd_module.add(message,Turn,txt_1,txt_2,txt_3)
    #bd_module.add(message,Turn,txt_1,txt_2,SQL_Q)
    print("–°–ê–°!")
    global SQL_Q
    SQL_Q = bd_module.db_add(SQL_Q)


    print("########################")
    for id_user in SQL_Q[0]:
        print(id_user)
    print("########################")

# END

# BEGIN –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –∫–æ–Ω—Å–æ–ª–∏.

async def STOP():
    #await bot.logout() # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
    await bot.close()


def tis():
    Q = True
    while Q == True:
        I = input()
        if I == "/stop":
            print("–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ")
            bot.loop.create_task(STOP())
            Q = False
        if I == "/h" or I == "/help":
            print("/stop - –í—ã–∫–ª—é—á–∞–µ—Ç –≤—Å—ë.")
            print("/Restart_API - –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API Discord.")
            print("/Restart_BOT - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å—ë.")
            print("/BD_info - –ü–æ–∫–æ–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ BD.")
            print("/BD_reconect - –ü—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ BD.")
            print("/BD_scan - –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É —Ç—Ä–µ–∫–æ–≤ –Ω–∞ —Ü–µ–ª–æ—Å–Ω–æ—Å—Ç—å.")
            print("/BD_rm_server <SERVER> - –£–¥–∞–ª–∏—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –∏–∑ BD")
            print("/BD_updeite_server <SERVER> - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ BD —Å Local_BD")
            print("/updeite_jison - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ json —Ñ–∞–π–ª–µ.")
        if I == "/BD_reconect":
            bd_module.bd_reconect()
        if I == "/BD_scan":
            FALSE_BD, FALSE_FEAL = bd_module.bd_scan()
            if len(FALSE_BD) == 0 and len(FALSE_FEAL) == 0:
                print("–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–º–µ–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç —Ñ–∞–π–ª–æ–≤!")
            else:
                i = input("–ò–º–µ—é—Ç—Å—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è, –ø–æ–ø—ã—Ç–∞—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç—å \n–Ω–µ–¥–æ—Å—Ç–∞—é—à–∏–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é ?\nY/N\n")
                if  i == "Y" or i == "y":
                    if len(FALSE_BD) != 0:
                        if len(FALSE_BD) <= 0:
                            JJJ = len(FALSE_BD) / 100
                        else:
                            JJJ = 100 / len(FALSE_BD)
                        i = 0
                        for id in FALSE_BD:
                            url = (f"https://www.youtube.com/watch?v={id}")
                            #nprint2(url, i)
                            nprint2(url, i)
                            name = f"{put}Music/{id}.opus"
                            video = youtube.yyy(url)
                            youtube.don(url,id,name) # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ
                            volume = os.path.getsize(name)
                            bd_module.search_ID_rid(id, video, volume, "N/D")
                            i = i + JJJ
                        nprint2("–ì–æ—Ç–æ–≤–æ!", i)

                    #if len(FALSE_BD) != 0:
                        #for id in FALSE_FEAL:
                    print("\n")
                else:
                    print("–í–æ—Å—Ç–æ–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ!")

# END

### –°—Ç–∞—Ä—Ç –±–æ—Ç–∞.
@bot.event
async def on_ready():
    nprint("–ë–æ—Ç –æ–Ω–ª–∞–π–Ω!!!")
    print("\n#########–°–µ—Ä–≤–µ—Ä–∞#########")
    for id_user in SQL_Q[0]:
        print(id_user)
    print("#########################")
    variable = Thread(target=tis)
    variable.start()
    #print("–ë–æ—Ç –æ–Ω–ª–∞–π–Ω!!!")

numbers = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"]



@bot.event # –°–ª—É—à–∞–µ—Ç.
async def on_message(message):
    chat = False
    if DEBUG: print("–î–∞ ?")
    if message.content.startswith(X_Pars['prefix']): # –ö–æ–º–∞–Ω–¥–∞ ?
        command(message)
        pass

    else:
        for id_lin in SQL_Q[3]: # –í —Ç–æ–º –ª–∏ —á–∞—Ç–µ ?
            if id_lin == message.channel.id:
                chat = True

        if chat == True:
            if message.author.id != X_Pars['bot_id']:# –ë–æ—Ç ?
                await message.delete()
                if DEBUG: print(message.author.id)

            if message.content == (''):# –≠—Ç–æ —Ñ–∞–µ–ª ?
                pass
            for A in numbers:
                if message.content.startswith(A):# –≠—Ç–æ —Ü–∏—Ñ—Ä—ã –¥–ª—è –ø–µ—Ä–µ–º–æ–¥–∫–∏ ?
                    print("SSSSSSSSSSSSSSS")
                    start_position = time_translation.timeL(message.content)
                    print(start_position)
                    bd_module.rewind_in_the_queue(message.guild.id, start_position, "rewind")
                    msg = bot.get_guild(message.guild.id)
                    voice = get(bot.voice_clients, guild=msg)
                    voice.stop()

            else:
                if message.content.startswith('y') or message.content.startswith('Y') or message.content.startswith('n') or message.content.startswith('N'):# –û—Ç–≤–µ—Ç ?
                    message_id, url = bd_module.qwestion_bd_search(message)
                    if message_id != False:
                        msg = await message.channel.fetch_message(message_id)
                        await msg.delete()
                        bd_module.qwestion_bd_rm(message_id)
                        if message.content.startswith('y') or message.content.startswith('Y'):
                            print("A ,,,")
                            #if DEBUG: print("–ü–ª–µ–π–ª–∏—Å—Ç ?\ny/n")
                            url_S = youtube.playlist_pars(url)
                            env = os.environ.copy()
                            env["URL"] = f"https://www.youtube.com/playlist?list={url_S}"
                            proc = await asyncio.create_subprocess_exec(sys.executable, f"{put}run.py", env=env)
                            await proc.wait()
                            print(proc.returncode)

                        if message.content.startswith('n') or message.content.startswith('N'):
                            if DEBUG: print("–ù–µ –ø–ª–µ–π–ª–∏—Å—Ç")
                            id = water_handler.youtube(url)
                            url = f"https://www.youtube.com/watch?v={id}"
                            id = await download.youtube_d(url,message)
                            put_it_on = message.author.id
                            #await messenger_2(message,url, id, put_it_on, name) –ò–º–µ–Ω–∏ –Ω–µ—Ç—É!!!



                    pass





                elif message.content != (''):
                    global preparation_time
                    preparation_time = time()
                    id = message.author.guild.id
                    id_channel = message.channel.id
                    url = message.content

                    if DEBUG: print(url)

                    #variable = Thread(target=http, args=(url, Turn, id, id_channel, message))
                    #variable.start()

                    #asyncio.run(http(url, Turn, id, id_channel, message))
                    await http(url, Turn, id, id_channel, message)
                    print("–Ø 1 –∞ —Ç—ã ?")
                    #http(url, Turn, id, id_channel, message)
                    #await http(url, Turn, id, id_channel, message)
                    #await asyncio.bot.loop.create_task(http(url, Turn, id, id_channel, message))
                    #await bot.loop.create_task(await http(url, Turn, id, id_channel, message))
                    #print("–Ø 2 –∞ —Ç—ã ?")
                    #print("SSSSSSSSSSSSSSSSSSSSSSSSSs")
                    #task3 = asyncio.create_task(http(url, Turn, id, id_channel, message))







# BEGIN –ö–Ω–æ–ø–∫–∏

@bot.event
async def on_raw_reaction_add(reaction): # –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ç–æ, –∫—Ç–æ —ç—Ç–æ
    global volume1, repeat
    if DEBUG: print(reaction.user_id)
    if reaction.user_id != X_Pars['bot_id']:# –ë–æ—Ç ?
        if DEBUG: print(f"{reaction.member.display_name}#{reaction.member.discriminator}")


        #print(user.id)
        #msg_2 = bot.get_guild(int(X_Pars["guild_id"]))
        msg = bot.get_guild(reaction.member.guild.id)
        #if user.id != X_Pars["bot_id"]:
        #print(msg.author.id)
        user234id = True
        if DEBUG: print(reaction.user_id)
        admin_list = X_Pars['admin_list']
        admin_list.append("001")
        a = 0
        #while admin_list[a] != "001":
            #if reaction.user_id == admin_list[a]:

        if DEBUG: print("123")
        #ctx = ("pause")
        #await reaction.clear_reaction(reaction)
        #def on_track_end2(error):
        #    bot.loop.create_task(bot.send(":white_check_mark: –°–∫–∞—á–∞–Ω–æ!"))
        #await ctx.send(reaction) #–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –∞—Ä–≥—É–º–µ–Ω—Ç

        #await reaction.message.channel.send(reaction)
        #print(on_reaction_add)

        #voice = get(bot.voice_clients, guild=reaction.message.guild)
        voice = get(bot.voice_clients, guild=msg)
        #print(reaction)
        #await ('Say hello!')
        #on_track_end2
        #await reaction.message.send('Hello World!')
        if DEBUG: print("1")
        if DEBUG: print(reaction.emoji)
        if (str(reaction.emoji) == "‚è∏Ô∏è"):
            #print("2")
            voice.pause()
            if DEBUG: print("–ü–∞—É–∑–∞")

        if (str(reaction.emoji) == "‚èØÔ∏è"):
            if DEBUG: print("–°–µ—Ä–¥—Ü–µ")

        if (str(reaction.emoji) == "‚ñ∂Ô∏è"):
            if DEBUG: print("–ü–ª–µ–π")
            voice.resume()
        if (str(reaction.emoji) == "‚è©"):
            if DEBUG: print("–ü—Ä–æ–ø—É—Å–∫")
            voice.stop()
        if (str(reaction.emoji) == "‚è≠Ô∏è"):
            if DEBUG: print("–ü—Ä–æ–ø—É—Å–∫ –ø–ª–µ–π –ª–∏—Å—Ç–∞.")
            print(voice.timestamp/100000)
            print(voice.sequence)
            print(voice._lite_nonce)
            print(voice._player.loops)
        if (str(reaction.emoji) == "‚èπÔ∏è"):
            if DEBUG: print(reaction.emoji)
            bd_module.rewind_in_the_queue(reaction.member.guild.id, "-", "stop")
            voice.stop()
        """
        if (str(reaction.emoji) == "üîÑ"):
            message = reaction.message
            id , put_it_on = bd_module.reading_from_a_queue(message)
            start_position = 30000
            sing(message,id, put_it_on, start_position)
            #if repeat == True:
                #repeat = False
            #else:
                #repeat = True
            if DEBUG: print(reaction.emoji)
            if DEBUG: print("üîÇ")
            if DEBUG: print("‚û°Ô∏è")
        """
        if (str(reaction.emoji) == "üîä"):
            volume1 = volume1 + 0.1
            volume1 = round(volume1, 1)
            if DEBUG: print(volume1)
            if volume1 > 1:
                volume1 = volume1 - 0.1
            else:
                voice.source.volume = volume1
        if (str(reaction.emoji) == "üîâ"):
            volume1 = volume1 - 0.1
            volume1 = round(volume1, 1)
            if DEBUG: print(volume1)
            if volume1 < 0.1:
                volume1 = volume1 + 0.1
            else:
                voice.source.volume = volume1
            if DEBUG: print("3")
# END

bot.run(TOKEN)

